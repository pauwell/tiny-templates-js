<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>TinyTemplatesJs</title>
  <style>
    .base-template{
      background-color: rgb(236, 236, 236);
      display: flex;
      flex-wrap: wrap;
      justify-content: space-evenly;
    }
    .base-template > h2{ width: 100%; text-align: center; }
    .input, .output{ min-width: 320px; margin-bottom: 20px; }
    .input{ background-color: limegreen; }
    .output{ background-color: lightgray; }
  </style>
  <script src="tiny_helper.js"></script>
  <script src="tiny_state.js"></script>
  <script src="tiny_template-0.3.js"></script>
  <script>
    /* Example template. */
    class BaseTemplate extends TinyTemplate{
      constructor(parent, name, state){
        super(parent, name, state);
      }

      changeAge(increment){ // This function changes the internal state.
        if(increment === true){
          this.setState({age: this.getState('age') + 1});
        }else if(this.getState('age') > 0){
          this.setState({age: this.getState('age') - 1});
        }
      }
      changeWeight(event){
        this.setState();//toodo
      }
      updateName(event){
        this.setState({name: event.target.value});
      }
    }
  </script>
</head>
<body>
  <!-- Application entry -->
  <h1>TinyTemplatesJS</h1>
  <fieldset>
    <legend><em>Example template</em></legend>
    <div id="app"></div>
  </fieldset>

  <!-- Example template -->
  <script type="text/html" id="base-template">
    <div class="base-template">
      <h2>Form</h2>   
      <fieldset class="input">
        <h3>Input</h3>
        <p><i>Please fill in the data</i></p>
        <p>
          <label>Name</label>
          <input type="text" onkeyup="baseTemplate.updateName(event)">
        </p>
        <p>
            <span>Age :js(this.getState('age'))</span>
            <button onclick="baseTemplate.changeAge(true)">Older</button>
            <button onclick="baseTemplate.changeAge(false)">Younger</button>
        
          :if(this.getState('age') > 80)
            <em>Wow, you are really old!</em>
          :fi
        </p>
        <p>
          <label>Weight</label>
          <input type="range" min="0" max="200" value="70" onchange="console.log('hey');">
        </p>
      </fieldset>
      <fieldset class="output">
          <h3>Output</h3>
          <p>Name: :js(this.getState('name'))!</p>
          <p>Gender: :js(this.getState('gender'))!</p>
          <p>Age :js(this.getState('age'))!</p>
          <p>Weight: :js(this.getState('weight'))!</p>
        </fieldset>
    </div>
  </script>

  <!-- Parse -->
  <script>    
    let appNode = document.getElementById('app');
    let baseTemplate = new BaseTemplate(appNode, 'base-template', {name: '', gender: 'male', age: 65, weight: 80});
  </script>
</body>
</html>