<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>TinyTemplatesJs</title>
  <script src="tiny_helper.js"></script>
  <script src="tiny_state.js"></script>
  <script src="tiny_template-0.3.js"></script>
  <script>
    /* Example template. */
    class BaseTemplate extends TinyTemplate{
      constructor(parent, name, state){
        super(parent, name, state);
      }

      changeAge(increment){ // This function changes the internal state.
        if(increment === true){
          this.state.setState({age: this.state.state['age'] + 1});
        }else if(this.state.state['age'] > 0){
          this.state.setState({age: this.state.state['age'] - 1});
        }
      }
      updateName(event){
        this.state.setState({name: event.target.value});
      }
    }
  </script>
</head>
<body>
  <!-- Application entry -->
  <h1>TinyTemplatesJS</h1>
  <fieldset>
    <legend><em>Example template</em></legend>
    <div id="app"></div>
  </fieldset>

  <!-- Example template -->
  <script type="text/html" id="base-template">
    <div>
      <h1>Form</h2>
        <fieldset>
          <p>Your age is :js(this.state.state['age'])!</p>
          <p>And your name is :js(this.state.state['name'])!</p>
        </fieldset>
      <p>
        <label>Name :js(this.state.state['name']) </label>
        <input 
          type="text" 
          onkeyup="baseTemplate.updateName(event)"
        >
      </p>
      <p><span>Age :js(this.state.state['age'])</span>
          <button onclick="baseTemplate.changeAge(true)">Older</button>
          <button onclick="baseTemplate.changeAge(false)">Younger</button>
       
        :if(this.state.state['age']>80)
          <em>Wow, you are really old!</em>
        :fi
      </p>
    </div>
  </script>

  <!-- Parse -->
  <script>    
    let appNode = document.getElementById('app');
    let baseTemplate = new BaseTemplate(appNode, 'base-template', {name: '', age: 65, weight: 80, height: 174});
  </script>
</body>
</html>