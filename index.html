<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>TinyTemplatesJs</title>
  <script src="tiny_helper.js"></script>
  <script src="tiny_state.js"></script>
  <script src="tiny_template-0.2.js"></script>
  <script>
    /* Example template. */
    class BaseTemplate extends TinyTemplate{
      constructor(parent, name, state){
        super(parent, name, state);
      }

      incrementAge(){ // This function changes the internal state.
        this.state.setState({age: this.state.state['age'] + 1});
        console.log("Age changed");
      }
      updateName(event){
        this.state.setState({name: event.target.value});
        console.log("Name changed");
      }
    }
  </script>
</head>
<body>
  <!-- Application entry -->
  <h1>TinyTemplatesJS</h1>
  <fieldset>
    <legend><em>Example template</em></legend>
    <div id="app"></div>
  </fieldset>

  <!-- Example template -->
  <script type="text/html" id="base-template">
    <div>
      <h1>Hello</h2>
      <label>Your name is :js(this.state.state['name']) </label>
      <input 
        type="text" 
        onchange="baseTemplate.updateName(event)"
      >
      <p>Your age is :js(this.state.state['age'])!</p>
      <p>Your age is :js(this.state.state['age'])!</p>
      :if(this.state.state['age']>100)
        <p>Wow, you are really old!</p>
        <p>Second line</p>
      :fi
      <button onclick="baseTemplate.incrementAge()">Increment age</button>
      <p>
        <div><p>Hello there.</p></div>
      </p>
    </div>
  </script>

  <!-- Parse -->
  <script>    
    let appNode = document.getElementById('app');
    let baseTemplate = new BaseTemplate(appNode, 'base-template', {name: '', age: 95});
  </script>
</body>
</html>