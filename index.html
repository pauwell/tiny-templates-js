<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>TinyTemplatesJs</title>
  <script src="watch.js"></script>
  <script src="tiny_templates.js"></script>
  <script>
    // Example template.
    let example_template = {
      name: 'example-template',
      data: {
        name: 'Hans',
        age: 99
      },
      methods: {
        decrementAge(){ 
          --this.age;
          console.log(this.age); 
        }
      }
    }
    window.addEventListener("load", function(){
      parseTemplate('app', example_template);
    });
  </script>
</head>
<body>
  <!-- Application entry -->
  <div id="app"></div>

  <!-- Example template -->
  <script type="text/html" class="example-template">
    <div class="example-content"> 
      :if(this.data.age === 99)
        <h1 class="a">Welcome, {{ name }}</h1>
        <p class="a">Lorem ipsum</p>
        <form>
          <input type="submit" value="Hello">
        </form>
        :add(onclick, decrementAge)<button>Hello</button>:dda
        :add(color, red)<button>Hello</button>:dda
      :fi
      :if(this.data.name === "Bob")
        <h1 class="b">Welcome, {{name}}</h1>
        <p class="b">Lorem ipsum</p>
      :fi
      :for(let i=0; i<10; ++i)
        <p>I am {{ 10 + this.data.age }} years old!</p>
      :rof
    </div>
  </script>

  <!-- TEST -->
  <script>
  
    let bob = {
      age: 0
    }
    let ageChange = function(property, oldValue, newValue){
        console.log(newValue);
        console.log(`age changed from ${oldValue} to ${newValue}!`);
      }
    bob.watch('age', ageChange);
    bob.age = 100;
    bob.age = 40;

  </script>
  <!-- TEST -->
</body>
</html>